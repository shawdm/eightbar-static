<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>MQTT &#8211; eightbar</title>
	<atom:link href="http://eightbar.co.uk/tag/mqtt/feed/" rel="self" type="application/rss+xml" />
	<link>http://eightbar.co.uk</link>
	<description>Raising The Eight Bar</description>
	<lastBuildDate>Tue, 26 Jul 2016 09:38:58 +0000</lastBuildDate>
	<language>en-US</language>
	<sy:updatePeriod>hourly</sy:updatePeriod>
	<sy:updateFrequency>1</sy:updateFrequency>
	<generator>https://wordpress.org/?v=4.5.3</generator>
	<item>
		<title>Unpacking binary data from MQTT in Javascript</title>
		<link>http://eightbar.co.uk/2014/08/29/unpacking-binary-data-from-mqtt-in-javascript/</link>
		<pubDate>Fri, 29 Aug 2014 21:19:54 +0000</pubDate>
		<dc:creator><![CDATA[Ben Hardill]]></dc:creator>
				<category><![CDATA[Planet]]></category>
		<category><![CDATA[eightbar]]></category>
		<category><![CDATA[javascript]]></category>
		<category><![CDATA[MQTT]]></category>
		<category><![CDATA[tech]]></category>
		<category><![CDATA[websockets]]></category>

		<guid isPermaLink="false">http://www.hardill.me.uk/wordpress/?p=1837</guid>
		<description><![CDATA[While doing trawl of Stackoverflow for questions I might be able to help out with I came across this interesting looking question: Receive binary with paho mqttws31.js The question was how to unpack binary MQTT payloads into double precision floating point numbers in javascript when using the Paho MQTT over WebSockets client. Normally I would [&#8230;] <a href="http://eightbar.co.uk/2014/08/29/unpacking-binary-data-from-mqtt-in-javascript/">Continue reading <span class="meta-nav">&#8594;</span></a>]]></description>
				<content:encoded><![CDATA[<p>While doing trawl of <a href="http://stackoverflow.com/">Stackoverflow</a> for questions I might be able to help out with I came across this interesting looking question:</p>
<h2><a title="Receive binary with paho mqttws31.js" href="http://stackoverflow.com/questions/25547653/receive-binary-with-paho-mqttws31-js">Receive binary with paho mqttws31.js</a></h2>
<p>The question was how to unpack binary <a href="http://mqtt.org/">MQTT</a> payloads into double precision floating point numbers in javascript when using the <a href="http://www.eclipse.org/paho/clients/js/">Paho MQTT</a> over WebSockets client.</p>
<p>Normally I would just send floating point numbers as strings and parse them on the receiving end, but sending them as raw binary means much smaller messages, so I thought I&#8217;d see if I could help to find a solution.</p>
<p>A little bit of Googling turned up this link to the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Typed_arrays">Javascript typed arrays</a> which looked like it probably be in the right direction. At that point I got called away to look at something else so I stuck a quick answer in with a link and the following code snippet.</p>
<pre class="brush: javascript; gutter: true">function onMessageArrived(message) {
  var payload = message.payloadByte()
  var doubleView = new Float64Array(payload);
  var number = doubleView[0];
  console.log(number);
}</pre>
<p>Towards the end of the day I managed to have a look back and there was a comment from the original poster saying that the sample didn&#8217;t work. At that point I decided to write a simple little testcase.</p>
<p>First up quick little Java app to generate the messages.</p>
<pre class="brush: java; gutter: true">import java.nio.ByteBuffer;
import org.eclipse.paho.client.mqttv3.MqttClient;
import org.eclipse.paho.client.mqttv3.MqttException;
import org.eclipse.paho.client.mqttv3.MqttMessage;

public class MessageSource {

  public static void main(String[] args) {
    try {
      MqttClient client = new MqttClient(&quot;tcp://localhost:1883&quot;, &quot;doubleSource&quot;);
      client.connect();

      MqttMessage message = new MqttMessage();
      ByteBuffer buffer = ByteBuffer.allocate(8);
      buffer.putDouble(Math.PI);
      System.err.println(buffer.position() + &quot;/&quot; + buffer.limit());
      message.setPayload(buffer.array());
      client.publish(&quot;doubles&quot;, message);
      try {
        Thread.sleep(1000);
      } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
      }
      client.disconnect();
    } catch (MqttException e) {
      // TODO Auto-generated catch block
      e.printStackTrace();
    }
  }
}
</pre>
<p>It turns out that using typed arrays is a little more complicated and requires a bit of work to populate the data structures properly. First you need to create an <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Typed_arrays/ArrayBuffer">ArrayBuffer</a> of the right size, then wrap it in a <a href="https://developer.mozilla.org/en-US/docs/Web/API/Uint8Array">Uint8Array</a> in order to populate it, before changing to the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Float64Array">Float64Array</a>. After a little bit of playing around I got to this:</p>
<pre class="brush: javascript; gutter: true">function onMessageArrived(message) {
  var payload = message.payloadBytes
  var length = payload.length;
  var buffer = new ArrayBuffer(length);
  uint = new Uint8Array(buffer);
  for (var i=0; i&lt;length; i++) {
	  uint[i] = payload[i];
  }
  var doubleView = new Float64Array(uint.buffer);
  var number = doubleView[0];
  console.log(&quot;onMessageArrived:&quot;+number);
};</pre>
<p>But this was returning <em>3.207375630676366e-192</em> instead of Pi. A little more head scratching and the idea of checking the byte order kicked in:</p>
<pre class="brush: javascript; gutter: true">function onMessageArrived(message) {
  var payload = message.payloadBytes
  var length = payload.length;
  var buffer = new ArrayBuffer(length);
  uint = new Uint8Array(buffer);
  for (var i=0; i&lt;length; i++) {
	  uint[(length-1)-i] = payload[i];
  }
  var doubleView = new Float64Array(uint.buffer);
  var number = doubleView[0];
  console.log(&quot;onMessageArrived:&quot;+number);
};</pre>
<p>This now gave an answer of <em>3.141592653589793</em> which looked a lot better. I still think there may be a cleaner way to do with using a <a href="https://developer.mozilla.org/en-US/docs/Web/API/DataView">DataView</a> object, but that&#8217;s enough for a Friday night.</p>
<p>EDIT:</p>
<p>Got up this morning having slept on it and came up with this:</p>
<pre class="brush: javascript; gutter: true">function onMessageArrived(message) {
  var payload = message.payloadBytes
  var length = payload.length;
  var buffer = new ArrayBuffer(length);
  uint = new Uint8Array(buffer);
  for (var i=0; i&lt;length; i++) {
	  uint[i] = payload[i];
  }
  var dataView = new DataView(uint.buffer);
  for (var i=0; i&lt;length/8; i++) {
      console.log(dataView.getFloat64((i*8), false));
  }
};</pre>
<p>This better fits the original question in that it will decode an arbitrary length array of doubles and since we know that Java is big endian, we can set the little endian flag to false to get the right conversion without having to re-order the array as we copy it into the buffer (which I&#8217;m pretty sure wouldn&#8217;t have worked for more than one value).</p>
]]></content:encoded>
	<enclosure url="" length="" type="" />
		</item>
		<item>
		<title>Node-RED Flows that make flows</title>
		<link>http://eightbar.co.uk/2014/01/19/node-red-flows-that-make-flows/</link>
		<pubDate>Sun, 19 Jan 2014 16:39:41 +0000</pubDate>
		<dc:creator><![CDATA[Andy Stanford-Clark]]></dc:creator>
				<category><![CDATA[IBM Projects]]></category>
		<category><![CDATA[messaging]]></category>
		<category><![CDATA[Node-RED]]></category>
		<category><![CDATA[Technology]]></category>
		<category><![CDATA[hacking]]></category>
		<category><![CDATA[MQTT]]></category>

		<guid isPermaLink="false">http://eightbar.co.uk/?p=1493</guid>
		<description><![CDATA[Executive Summary When a mummy function node and a daddy function node love each other very much, the daddy node injects a payload into the mummy node through a wire between them, and a new baby message flow is made, &#8230; <a href="http://eightbar.co.uk/2014/01/19/node-red-flows-that-make-flows/">Continue reading <span class="meta-nav">&#8594;</span></a>]]></description>
				<content:encoded><![CDATA[<h2>Executive Summary</h2>
<p>When a mummy function node and a daddy function node love each other very much, the daddy node injects a payload into the mummy node through a wire between them, and a new baby message flow is made, which comes out of mummy&#8217;s output terminal. The baby&#8217;s name is Jason.</p>
<h2>Where did this idea come from?</h2>
<p>In <a title="Node-RED" href="http://nodered.org" target="_blank">Node-RED</a>, if you export some nodes to the clipboard, you will see the flow and its connections use a JSON wire format.</p>
<p>For a few weeks I&#8217;ve been thinking about generating that JSON programmatically, in order to create flows which encode various input and output capabilities and functions, according to some input parameters which give the specific details of what the flow is to do.</p>
<p>I think there&#8217;s been an alignment of planets that&#8217;s occurred, which led to this idea:</p>
<p><a title="Stefan Kwiatkowski" href="http://twitter.com/stef_k_uk" target="_blank">@stef_k_uk</a> has been talking to me about deploying applications onto &#8220;slave&#8221; Raspberry Pis from a master Pi.</p>
<p>Dritan Kaleshi and Terence Song from Bristol University have been discussing using the Node-RED GUI as a configurator tool for a system we&#8217;re working on together, and also we&#8217;ve been working on representing <a title="HyperCat" href="http://wiki.1248.io/doku.php?id=hypercat" target="_blank">HyperCat</a> catalogues in Node-RED, as part of our Technology Strategy Board Internet of Things project, <a title="IoT-Bay" href="http://iot-bay.org" target="_blank">IoT-Bay</a>.</p>
<p><a title="James Macfarlane" href="http://twitter.com/rocketengines" target="_blank">@rocketengines</a> and I were cooking up cool ideas for cross-compiling Node-RED flows into other languages, a while back, and</p>
<p>in a very productive ideas afternoon last week, <a title="Prof Jeremy Frey" href="http://twitter.com/profechem" target="_blank">@profechem</a> and I stumbled upon an idea for carrying the parser for a data stream along with the data itself, as part of its meta-data description.</p>
<p>All of the above led me to think &#8220;wouldn&#8217;t it be cool if you could write a flow in Node-RED which produced as output another flow.&#8221; And for this week&#8217;s #ThinkFriday afternoon, I gave it a try.</p>
<h2>First experiment</h2>
<p>The first experiment was a flow which had an injector node feeding a JSON object of parameters into a flow which generated the JSON for an MQTT input node, a function node to process the incoming data in some way, and an MQTT output node. So it was the classic <em>subscribe &#8211; process &#8211; publish</em> pattern which occurs so often in our everday lives (if you live the kind of life that I do!).<br />
<img class="aligncenter" alt="first Node-RED flow" src="http://stanford-clark.com/nodeRED/flow1.png" />And here&#8217;s the Node-RED flow which generates that: <a title="flow that makes a new flow" href="http://flows.nodered.org/flow/7887838b33139c673ad2" target="_blank">flow-generator</a></p>
<p>So if you sent in<br />
<code>{<br />
"broker": "localhost",<br />
"input": "source_topic",<br />
"output": "destination_topic",<br />
"process": "msg.payload = \"* \"+msg.payload+\" *\";\nreturn msg;"<br />
}</code></p>
<p>the resulting JSON would be the wire format for a three-node flow which has an MQTT input node subscribed to &#8220;<code>source_topic</code>&#8221; on the broker on &#8220;localhost&#8221;, a function node which applies a transformation to the data: in this case, wrapping it with an asterisk at each end, and finally an MQTT publish node sending it to &#8220;<code>destination_topic</code>&#8221; on &#8220;localhost&#8221;.<br />
<strong>N.B.</strong> make sure you escape any double quotes in the &#8220;process&#8221; string, as shown above.</p>
<p>The JSON appears in the debug window. If you highlight it, right-mouse &#8211; Copy, and then do Import from&#8230; Clipboard in Node-RED and ctrl-V the JSON into the text box and click OK, you get the three node flow described above ready to park on your Node-RED worksheet and then Deploy.<br />
<img class="aligncenter" alt="the resulting " src="http://stanford-clark.com/nodeRED/flow4.png" />And it works!!</p>
<h2>So what?</h2>
<p>So far so cool. But what can we do with it?</p>
<p>The next insight was that the configuration message (supplied by the injector) could come from somewhere else. An MQTT topic, for example. So now we have the ability for a data stream to be accompanied not only by meta-data describing what it is, but also have the code which parses it.<br />
<img class="aligncenter" alt="flow with added MQTT configurator" src="http://stanford-clark.com/nodeRED/flow2.png" />My thinking is that if you subscribe to a data topic, say:<br />
<code>andy/house/kitchen/temperature</code><br />
there could be two additional topics, published &#8220;retained&#8221; so you get them when you first subscribe, and then any updates thereafter:</p>
<p>A metadata topic which describes, in human and/or machine readable form, what the data is about, for example:<br />
<code>andy/house/kitchen/temperature/meta</code> with content<br />
&#8220;temperature in degrees Celcius in the kitchen at Andy&#8217;s house&#8221;</p>
<p>And a parser topic which contains the code which enables the data to be parsed:<br />
<code>andy/house/kitchen/temperature/parser</code> with content<br />
&#8220;<code>msg.value = Math.round(msg.payload) + \" C\"; return msg;</code>&#8221;<br />
(that&#8217;s probably a rubbish example of a useful parser, but it&#8217;s just for illustration!)</p>
<p>If you&#8217;re storing your data in a <a title="HyperCat" href="http://wiki.1248.io/doku.php?id=hypercat" target="_blank">HyperCat</a> metadata catalogue (and you should think about doing so if you&#8217;re not &#8211; see <a title="Pilgrim Beart" href="http://twitter.com/pilgrimbeart" target="_blank">@pilgrimbeart</a>&#8216;s excellent <a title="HyperCat in 15 mins" href="http://www.slideshare.net/1248_io/hypercat-introduction-15-mins" target="_blank">HyperCat in 15 minutes presentation</a>), then the catalogue entry for the data point could include the URI of the parser function along with the other meta-data.</p>
<h2>And then&#8230;</h2>
<p>Now things get really interesting&#8230; what if we could deploy that flow we&#8217;ve created to a node.js run-time and set it running, as if we&#8217;d created the flow by hand in the Node-RED GUI and clicked &#8220;Deploy&#8221;?<br />
Well we can!</p>
<p>When you click Deploy, the Node-RED GUI does an HTTP POST to &#8220;<code>/flows</code>&#8221; in the node.js run-time that&#8217;s running the Node-RED server (red.js), and sends it the list of JSON objects which describe the flow that you&#8217;ve made.<br />
So&#8230; if we hang an HTTP request node off the end of the flow which generates the JSON for our little flow, then it should look like a Deploy from a GUI.</p>
<p>Et voila!<br />
<img class="aligncenter" alt="flow that deploys to a remote Node-RED" src="http://stanford-clark.com/nodeRED/flow3.png" /><br />
Note that you have to be careful not to nuke your flow-generating-flow by posting to your own Node-RED run-time! I am posting the JSON to Node-RED on my nearby Raspberry Pi. When you publish a configuration message to the configuration topic of this flow, the appropriate set of nodes is created &#8211; <em>input &#8211; process &#8211; output</em> &#8211; and then deployed to Node-RED on the Pi, which dutifully starts running the flow, subscribing to the specified topic, transforming the data according to the prescribed processing function, and publishing it to the specified output topic.</p>
<p>I have to say, I think this is all rather exciting!</p>
<p><a title="Andy Stanford-Clark" href="http://twitter.com/andysc" target="_blank">@andysc</a></p>
<h3>Footnote:</h3>
<p>It&#8217;s worth mentioning, that Node-RED generates unique IDs for nodes that look like &#8220;8cf45583.109bf8&#8221;. I&#8217;m not sure how it does that, so I went for a simple monotonically increasing number instead (1, 2 &#8230;). It seems to work fine, but there might be good reasons (which I&#8217;m sure <a title="Nick O'leary" href="http://twitter.com/knolleary" target="_blank">@knolleary</a> will tell me about) why I should do it the &#8220;proper&#8221; way.</p>
]]></content:encoded>
			</item>
		<item>
		<title>At ThingMonk 2013</title>
		<link>http://eightbar.co.uk/2013/12/15/at-thingmonk-2013/</link>
		<pubDate>Sun, 15 Dec 2013 18:20:39 +0000</pubDate>
		<dc:creator><![CDATA[Laura Cowen]]></dc:creator>
				<category><![CDATA[Planet]]></category>
		<category><![CDATA[Technology]]></category>
		<category><![CDATA[conference]]></category>
		<category><![CDATA[eightbar]]></category>
		<category><![CDATA[Energy and Environment]]></category>
		<category><![CDATA[HCI & Usability]]></category>
		<category><![CDATA[IBM]]></category>
		<category><![CDATA[Making Things]]></category>
		<category><![CDATA[MQTT]]></category>
		<category><![CDATA[Open Source]]></category>
		<category><![CDATA[WASdev]]></category>

		<guid isPermaLink="false">http://www.lauracowen.co.uk/blog/?p=1716</guid>
		<description><![CDATA[<p>ThingMonk 2013 was a two-day conference about the Internet of Things in London. Organised by RedMonk and sponsored by, among others, IBM.</p>
<p>The post <a rel="nofollow" href="http://lauracowen.co.uk/blog/2013/12/15/thingmonk-2013/">At ThingMonk 2013</a> appeared first on <a rel="nofollow" href="http://lauracowen.co.uk/blog">LauraCowen.co.uk</a>.</p> <a href="http://eightbar.co.uk/2013/12/15/at-thingmonk-2013/">Continue reading <span class="meta-nav">&#8594;</span></a>]]></description>
				<content:encoded><![CDATA[<p><span style="line-height: 1.5em;">I attended <a href="http://redmonk.com/thingmonk/">ThingMonk 2013</a> conference partly because <a href="http://www-01.ibm.com/software/info/internet-of-things/">IBM&#8217;s doing a load of work around the Internet of Things</a> (IoT). I figured it would be useful to find out what&#8217;s happening in the world of IoT at the moment. Also, I knew that, as a *Monk production, the food would be amazing.</span></p>
<h2><span style="line-height: 1.5em;">What is the Internet of Things?</span></h2>
<p><span style="line-height: 1.5em;">If you&#8217;re reading this, you&#8217;re familiar with using devices to access information, communicate, buy things, and so on over the Internet. The Internet of Things, at a superficial level, is just taking the humans out of the process. So, for example, if your washing machine were connected to the Internet, it could automatically book a service engineer if it detects a fault.</span></p>
<p><span style="line-height: 1.5em;">I say &#8216;at a superficial level&#8217; because there are obviously still issues relevant to humans in an automated process. It matters that the automatically-scheduled appointment is convenient for the householder. And it matters that the householder trusts that the machine really is faulty when it says it is and that it&#8217;s not the manufacturer just calling out a service engineer to make money.</span></p>
<p>This is how <a href="https://twitter.com/monkchips">James Governor</a> of <a href="http://redmonk.com/">RedMonk</a>, who conceived and hosted ThingMonk 2013, explains IoT:</p>
<p><iframe src="http://www.youtube-nocookie.com/embed/R_muAEDXx2o?rel=0" width="560" height="315" frameborder="0" allowfullscreen="allowfullscreen"></iframe></p>
<h2>What is ThingMonk 2013?</h2>
<p>ThingMonk 2013 was a fun two-day conference in London. On Monday was a hackday with spontaneous lightning talks and on Tuesday were the scheduled talks and the evening party. I wasn&#8217;t able to attend Monday&#8217;s hackday so you&#8217;ll have to read someone else&#8217;s write-up about that (you could try <a href="http://josiemessa.wordpress.com/2013/12/09/thingmonk-day-1/">Josie Messa&#8217;s</a>, for instance).</p>
<h2>The talks</h2>
<p>I bought my Arduino getting started kit (which I used for <a title="Electricity monitoring with Christmas lights and Arduino" href="http://www.lauracowen.co.uk/blog/2010/02/09/electricity-monitoring-with-christmas-lights-and-arduino/">my Christmas lights energy project</a> in 2010) from Tinker London so I was pleased to finally meet Tinker&#8217;s former-CEO, <a style="line-height: 1.5em;" href="https://twitter.com/iotwatch">Alexandra Dechamps-Sonsino</a><span style="line-height: 1.5em;">, at ThingMonk 2013. I&#8217;ve known her on Twitter for about 4 years but we&#8217;d never met in person. Alex is also founder of the <a href="https://twitter.com/GNLteam">Good Night Lamp</a>, which <a title="The Ambient Kettle" href="http://www.lauracowen.co.uk/blog/2013/03/16/the-ambient-kettle/">I blogged about earlier this year</a>. She talked at ThingMonk about &#8220;the past, present and future of the Internet of Things&#8221; from her position of being part of it.</span></p>
<figure id="attachment_2004" style="width: 163px;" class="wp-caption aligncenter"><img class="size-medium wp-image-2004" src="http://lauracowen.co.uk/blog/wp-content/uploads/2013/12/IMG_1557-163x300.jpg" alt="Alexandra Deschamps-Sonsino, @iotwatch" width="163" height="300" /><figcaption class="wp-caption-text">Alexandra Deschamps-Sonsino, @iotwatch</figcaption></figure>
<p><span style="line-height: 1.5em;">I think it was probably </span><a style="line-height: 1.5em;" href="https://twitter.com/knolleary">Nick O&#8217;Leary</a><span style="line-height: 1.5em;"> who first introduced me to the Arduino, many moons ago over cups of tea at work. He spoke at ThingMonk about </span><a style="line-height: 1.5em;" href="http://knolleary.net/2013/12/05/wiring-the-internet-of-things-thingmonk-talk/">wiring the Internet of Things</a>. This included a demo of <span style="line-height: 1.5em;">his latest project, </span><a style="line-height: 1.5em;" href="http://nodered.org/">NodeRED</a><span style="line-height: 1.5em;">, which he and IBM have recently </span><a style="line-height: 1.5em;" href="https://github.com/node-red/node-red">open sourced on GitHub</a><span style="line-height: 1.5em;">.</span></p>
<figure id="attachment_2005" style="width: 300px;" class="wp-caption aligncenter"><img class="size-medium wp-image-2005" src="http://lauracowen.co.uk/blog/wp-content/uploads/2013/12/IMG_1570-300x206.jpg" alt="Nick O'Leary talks about wiring the Internet of Things" width="300" height="206" /><figcaption class="wp-caption-text">Nick O&#8217;Leary talks about wiring the Internet of Things</figcaption></figure>
<p>Sadly I missed the previous day when it seems Nick and colleagues, <a href="https://twitter.com/ceejay">Dave C-J</a> and <a href="https://twitter.com/andysc">Andy S-C</a>, won over many of the hackday attendees to the view that IBM&#8217;s <a href="http://mqtt.org/">MQTT</a> and NodeRED are the coolest things known to developerkind right now. So many people mentioned one or both of them throughout the day. One developer told me he didn&#8217;t know why he&#8217;d not tried MQTT 4 years ago. He also seemed interested in playing with NodeRED, just as soon as the shock that IBM produces cool things for developers had worn off.</p>
<p><a href="http://twitter.com/ianskerrett">Ian Skerrett</a> from <a href="http://www.eclipse.org/">Eclipse</a> talked about the role of Open Source in the Internet of Things. Eclipse has recently started the <a href="http://www.eclipse.org/paho/">Paho</a> project, which focuses on open source implementations of the standards and protocols used in IoT. The project includes IBM&#8217;s <a href="https://www.ibm.com/developerworks/community/groups/service/html/communityview?communityUuid=d5bedadd-e46f-4c97-af89-22d65ffee070">Really Small Message Broker</a> and Roger Light&#8217;s <a href="http://mosquitto.org/">Mosquitto</a>.</p>
<figure id="attachment_1998" style="width: 277px;" class="wp-caption aligncenter"><img class="size-medium wp-image-1998" src="http://lauracowen.co.uk/blog/wp-content/uploads/2013/12/IMG_1596-277x300.jpg" alt="Ian Skerrett from Eclipse" width="277" height="300" /><figcaption class="wp-caption-text">Ian Skerrett from Eclipse</figcaption></figure>
<p><a href="http://twitter.com/andypiper">Andy Piper</a> talked about <a href="http://www.slideshare.net/andypiper/the-internet-of-things-is-made-of-signals">the role of signals in the IoT</a>.</p>
<p><img class="aligncenter size-medium wp-image-2002" src="http://lauracowen.co.uk/blog/wp-content/uploads/2013/12/IMG_1546-300x210.jpg" alt="IMG_1546" width="300" height="210" /></p>
<p>There were a couple of talks about people&#8217;s experiences of startups producing physical objects compared with producing software. <a href="http://twitter.com/tomtaylor">Tom Taylor</a> talked about setting up <a href="http://www.newspaperclub.com/">Newspaper Club</a>, which is a site where you can put together and get printed your own newspaper run. His presentation included this slide:</p>
<p><a href="http://twitter.com/genmon"><img class="aligncenter size-medium wp-image-2000" src="http://lauracowen.co.uk/blog/wp-content/uploads/2013/12/IMG_1534-300x191.jpg" alt="IMG_1534" width="300" height="191" />Matt Webb</a> talked about producing <a href="http://bergcloud.com/littleprinter/">Little Printer</a>, which is an internet-connected device that subscribes to various sources and prints them for you on a strip of paper like a shop receipt.</p>
<p><a href="http://twitter.com/goodmachine"><img class="aligncenter size-medium wp-image-2003" src="http://lauracowen.co.uk/blog/wp-content/uploads/2013/12/IMG_1550-300x195.jpg" alt="IMG_1550" width="300" height="195" />Patrick Bergel</a> made the very good point in his talk that a lot of IoT projects, at the moment, are aimed at &#8216;non-problems&#8217;. While fun and useful for learning what we can do with IoT technologies, they don&#8217;t really address the needs of real people (ie people who aren&#8217;t &#8220;hackers, hipsters, or weirdos&#8221;). For instance, there are increasing numbers of older people who could benefit from things that address problems social isolation, dementia, blindness, and physical and cognitive impairments. His point was underscored throughout the day by examples of fun-but-not-entirely-useful-as-is projects, such as flying a drone with fruit. That&#8217;s not to say such projects are a waste of time in themselves but that we should get moving on projects that address real problems too.</p>
<p><img class="aligncenter size-medium wp-image-2001" src="http://lauracowen.co.uk/blog/wp-content/uploads/2013/12/IMG_1539-300x226.jpg" alt="IMG_1539" width="300" height="226" />The talk which chimed the most with me, though, was <a href="http://twitter.com/clurr">Claire Rowland</a>&#8216;s on the important user experience UX issues around IoT. She spoke about the importance of understanding how users (householders) make sense of automated things in their homes.</p>
<p><img class="aligncenter size-medium wp-image-1996" src="http://lauracowen.co.uk/blog/wp-content/uploads/2013/12/IMG_1587-249x300.jpg" alt="IMG_1587" width="249" height="300" /></p>
<h2>The book</h2>
<p>I bought a copy of <a href="https://twitter.com/amcewen">Adrian McEwan</a>&#8216;s <a href="http://book.roomofthings.com/">Designing The Internet of Things</a> book from Alex&#8217;s pop-up shop, <a href="https://twitter.com/Works_Shop">(Works)shop</a>. Adrian&#8217;s a regular at <a href="http://oggcamp.org/">OggCamp</a> and kindly agreed to sign my copy of his book for me.</p>
<figure id="attachment_1999" style="width: 300px;" class="wp-caption aligncenter"><img class="size-medium wp-image-1999" src="http://lauracowen.co.uk/blog/wp-content/uploads/2013/12/IMG_1599-300x255.jpg" alt="Adrian McEwan and the glamorous life of literary reknown." width="300" height="255" /><figcaption class="wp-caption-text">Adrian McEwan and the glamorous life of literary reknown.</figcaption></figure>
<h2>The food</h2>
<p>The food was, as expected, amazing. I&#8217;ve never had bacon and scrambled egg butties that melt in the mouth before. The steak and Guinness casserole for lunch was beyond words. The evening party was sustained with sushi and tasty curry.</p>
<p>Thanks, James!</p>
<p>The post <a rel="nofollow" href="http://lauracowen.co.uk/blog/2013/12/15/thingmonk-2013/">At ThingMonk 2013</a> appeared first on <a rel="nofollow" href="http://lauracowen.co.uk/blog">LauraCowen.co.uk</a>.</p>
]]></content:encoded>
	<enclosure url="" length="" type="" />
		</item>
		<item>
		<title>MQTT Joggler</title>
		<link>http://eightbar.co.uk/2013/02/07/mqtt-joggler/</link>
		<pubDate>Thu, 07 Feb 2013 09:44:09 +0000</pubDate>
		<dc:creator><![CDATA[James Taylor]]></dc:creator>
				<category><![CDATA[Planet]]></category>
		<category><![CDATA[Eclipse]]></category>
		<category><![CDATA[eightbar]]></category>
		<category><![CDATA[home automation]]></category>
		<category><![CDATA[Joggler]]></category>
		<category><![CDATA[light sensor]]></category>
		<category><![CDATA[mosquitto]]></category>
		<category><![CDATA[MQTT]]></category>
		<category><![CDATA[O2 Joggler]]></category>
		<category><![CDATA[Ones and Zeros]]></category>
		<category><![CDATA[Paho]]></category>
		<category><![CDATA[pubsub]]></category>
		<category><![CDATA[sensor]]></category>
		<category><![CDATA[SqueezePlay OS]]></category>

		<guid isPermaLink="false">http://jtlog.wordpress.com/?p=2171</guid>
		<description><![CDATA[Spurred on by the success of getting Mosquitto working on a Raspberry Pi, I recently had a play with MQTT on the Joggler. The O2 Joggler is still a great device for hacking&#160;and I currently have SqeezePlay OS&#160;running on it. &#8230; <a href="http://jtlog.wordpress.com/2013/02/07/mqtt-joggler/">Continue reading <span>&#8594;</span></a><img alt="" border="0" src="http://pixel.wp.com/b.gif?host=jtlog.wordpress.com&#38;blog=1751515&#38;post=2171&#38;subd=jtlog&#38;ref=&#38;feed=1" width="1" height="1"/> <a href="http://eightbar.co.uk/2013/02/07/mqtt-joggler/">Continue reading <span class="meta-nav">&#8594;</span></a>]]></description>
				<content:encoded><![CDATA[<p>Spurred on by the success of <a href="http://jtlog.wordpress.com/2013/01/04/raspberry-pi-mosquitto/">getting Mosquitto working on a Raspberry Pi</a>, I recently had a play with MQTT on the Joggler. The <a href="http://www.jogglerwiki.com/wiki/Main_Page">O2 Joggler is still a great device for hacking</a> and I currently have <a href="http://birdslikewires.co.uk/articles/squeezeplay-os">SqeezePlay OS</a> running on it.</p>
<p>The reason I wanted to try and get MQTT on the Joggler was to make use of its light sensor, and publish light levels over MQTT. It all turned out to be pretty simple since most of the work has already been done by other people!</p>
<ul>
<li>Andrew de Quincey has <a href="http://code.google.com/p/adqmisc/source/browse/trunk/joggler/readlightsensor.c">code to read the Joggler&#8217;s light sensor</a></li>
<li>Andy Piper has a <a href="http://andypiper.co.uk/2012/03/10/paho-gets-started/">handy quick start guide for Paho</a></li>
<li>The <a href="http://www.eclipse.org/paho/files/mqttdoc/Cclient/">MQTT C client documentation</a> has simple publish examples</li>
</ul>
<p>First thing to do was read the light sensor and get that working with an MQTT client. I had to skip some of Andy&#8217;s instructions and just built the client code rather than attempting to get doxygen working. Once I&#8217;d mashed up the light sensor code and publish example I could compile the worlds most pointless MQTT publisher:</p>
<pre>gcc -Wall publightsensor.c -L../bin/linux_ia32 -I../src -lmqttv3c -lpthread -o publightsensor</pre>
<p>Next it was time to check the results. This too was quick and easy thanks to the <a href="http://m2m.eclipse.org/sandbox.html">MQTT sandbox server</a>, which has a handy HTTP bridge. And the final result... was a completely unscientific and <a href="http://m2m-eclipse.cloudfoundry.com/jttest">slightly dingy light level 4</a>! Now I'll be able to turn on a lamp using an unreliable RF controlled socket and see whether it worked or not!</p>
<p><strong>Update:</strong> the code really is all in the existing examples but I've created a Github Gist in case it's any help: <a href="https://gist.github.com/anonymous/4753409">mqttjogglermashup.c</a> (11 February 2013)</p><br />  <a rel="nofollow" href="http://feeds.wordpress.com/1.0/gocomments/jtlog.wordpress.com/2171/"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/comments/jtlog.wordpress.com/2171/" /></a> <img alt="" border="0" src="http://pixel.wp.com/b.gif?host=jtlog.wordpress.com&#038;blog=1751515&%23038;post=2171&%23038;subd=jtlog&%23038;ref=&%23038;feed=1" width="1" height="1" />]]></content:encoded>
	<enclosure url="http://1.gravatar.com/avatar/74c39fd4d2c3b09efbea8c5db637c57c?s=96&amp;amp;d=identicon" length="" type="" />
		</item>
		<item>
		<title>developerWorks Days Zurich 2012</title>
		<link>http://eightbar.co.uk/2012/11/14/developerworks-days-zurich-2012/</link>
		<pubDate>Wed, 14 Nov 2012 13:44:14 +0000</pubDate>
		<dc:creator><![CDATA[Ben Hardill]]></dc:creator>
				<category><![CDATA[Planet]]></category>
		<category><![CDATA[Android]]></category>
		<category><![CDATA[conference]]></category>
		<category><![CDATA[developerWorks]]></category>
		<category><![CDATA[eightbar]]></category>
		<category><![CDATA[IBM]]></category>
		<category><![CDATA[MQTT]]></category>
		<category><![CDATA[Work]]></category>

		<guid isPermaLink="false">http://www.hardill.me.uk/wordpress/?p=1085</guid>
		<description><![CDATA[This week I had a day out of the office to go to Zurich to talk at this years IBM developerWorks Days. I had 2 sessions back to back in the mobile stream, the first an introduction to Android Development and the second on MQTT. The slots were only 35mins long (well 45mins, but we [&#8230;] <a href="http://eightbar.co.uk/2012/11/14/developerworks-days-zurich-2012/">Continue reading <span class="meta-nav">&#8594;</span></a>]]></description>
				<content:encoded><![CDATA[<p><a href="http://www.hardill.me.uk/wordpress/wp-content/uploads/2012/11/screenshot.png"><img src="http://www.hardill.me.uk/wordpress/wp-content/uploads/2012/11/screenshot.png" alt="" title="screenshot" width="169" height="300" class="alignright size-medium wp-image-1159" /></a></p>
<p>This week I had a day out of the office to go to Zurich to talk at this years IBM developerWorks Days. I had 2 sessions back to back in the mobile stream, the first an introduction to Android Development and the second on MQTT.</p>
<p>The slots were only 35mins long (well 45mins, but we had to leave 5 mins on each end to let people move round) so there was a limit to how much detail I could go into. With this in mind I decided the best way to give people a introduction to Android Development in that amount of time was to quickly walk through writing reasonably simple application. The application had to be at least somewhat practical, but also very simple so after a little bit of thinking about I settled on an app to download the latest image from the web comic <a href="http://xkcd.org/">XKCD</a>. There are a number apps on Google Play that already do this (and a lot better) but it does show a little Activity GUI design. I got through about 95% of the app live on stage and only had to copy &#038; paste the details for the onPostExecute method to clear the progress dialog and update the image in the last minute to get it to the point I could run it in the emulator.</p>
<p>Here are the slides for this session</p>
<p><iframe src="http://www.slideshare.net/slideshow/embed_code/15172901" width="476" height="400" frameborder="0" marginwidth="0" marginheight="0" scrolling="no"></iframe></p>
<p>And here is the Eclipse project for the Application I created live on stage:<br />
<a href="http://www.hardill.me.uk/XKCD-demo-android-app.zip">http://www.hardill.me.uk/XKCD-demo-android-app.zip</a></p>
<p>The MQTT pitch was a little easier to set up, there is loads of great content on <a href="http://mqtt.org/">MQTT.org</a> to use as a source and of course I remembered to include the section on the MQTT enabled mouse traps and twittering ferries from <a href="http://twitter.com/andysc">Andy Stanford-Clark</a>.</p>
<p>Here are the slides for the MQTT session:</p>
<p><iframe src="http://www.slideshare.net/slideshow/embed_code/15172934" width="476" height="400" frameborder="0" marginwidth="0" marginheight="0" scrolling="no"></iframe></p>
<p>For the Demo I used the Javascript d3 topic tree viewer I <a href="http://www.hardill.me.uk/wordpress/?p=1111" title="d3 MQTT topic tree visualiser">blogged about</a> last week and my Raspberry Pi running a <a href="http://mosquitto.org/">Mosquitto</a> broker and a little script to publish the core temperature, load and uptime values. The broker was also bridged to my home broker to show the feed from my weather centre and some other sensors.</p>
]]></content:encoded>
	<enclosure url="" length="" type="" />
		</item>
		<item>
		<title>Recent hacktivity</title>
		<link>http://eightbar.co.uk/2012/10/14/recent-hacktivity-2/</link>
		<pubDate>Sun, 14 Oct 2012 22:00:56 +0000</pubDate>
		<dc:creator><![CDATA[James Taylor]]></dc:creator>
				<category><![CDATA[Hursley]]></category>
		<category><![CDATA[Planet]]></category>
		<category><![CDATA[555 timer]]></category>
		<category><![CDATA[eightbar]]></category>
		<category><![CDATA[hackday]]></category>
		<category><![CDATA[hackday-x]]></category>
		<category><![CDATA[hackdayx]]></category>
		<category><![CDATA[hurhackx]]></category>
		<category><![CDATA[IBM]]></category>
		<category><![CDATA[Life, the Universe, and Everything]]></category>
		<category><![CDATA[lotus connections]]></category>
		<category><![CDATA[MQTT]]></category>
		<category><![CDATA[social business]]></category>
		<category><![CDATA[southackton]]></category>
		<category><![CDATA[Southampton]]></category>
		<category><![CDATA[zOS]]></category>

		<guid isPermaLink="false">http://jtlog.wordpress.com/?p=2085</guid>
		<description><![CDATA[This time of year seems to be hacking season and over the last few days I&#8217;ve been along to two hackdays! Friday was IBM&#8217;s internal Social Business Hackday. There was some MQTT hacking, a z/OS hack, hacks with Lotus Connections, &#8230; <a href="https://jtlog.wordpress.com/2012/10/14/recent-hacktivity/">Continue reading <span>&#8594;</span></a><img alt="" border="0" src="https://pixel.wp.com/b.gif?host=jtlog.wordpress.com&#38;blog=1751515&#38;post=2085&#38;subd=jtlog&#38;ref=&#38;feed=1" width="1" height="1"/> <a href="http://eightbar.co.uk/2012/10/14/recent-hacktivity-2/">Continue reading <span class="meta-nav">&#8594;</span></a>]]></description>
				<content:encoded><![CDATA[<p>This time of year seems to be hacking season and over the last few days I&#8217;ve been along to two <a href="http://subdigit.com/blog/hackday-explained/">hackdays</a>!</p>
<p>Friday was <a href="http://www.brianodonovan.ie/2012/08/hacking-becomes-mainstream-in-ibm.html">IBM&#8217;s internal Social Business Hackday</a>. There was some MQTT hacking, a <a href="https://www.ibm.com/developerworks/mydeveloperworks/blogs/MartinPacker/entry/hackday_x_batch_analytics_baby_steps42">z/OS hack</a>, hacks with Lotus Connections, hacks that could be the future of Lotus Connections, and I was attempting to hack a work around for a <a href="https://jazz.net/jazz/web/projects/Jazz%20Foundation#action=com.ibm.team.workitem.viewWorkItem&amp;id=216492">Jazz work item</a>. And that was just at the Hursley local event! We were able to link up with a few other labs, but over two days there were IBMers hacking around the globe. There are going to be a lot of amazing projects to choose from when it comes to voting.</p>
<p><a href="https://jtlog.files.wordpress.com/2012/10/webcams.png"><img class="alignnone size-medium wp-image-2086" title="webcams" alt="" src="https://jtlog.files.wordpress.com/2012/10/webcams.png?w=300&#038;h=164" height="164" width="300" /></a></p>
<p>(There are a few more photos from HackDay X, and previous hackdays, on the <a href="http://www.flickr.com/groups/hackday_ibm/">IBM hackday group on flickr</a>.)</p>
<p>For round two, today was the <a href="http://southackton.org.uk/2012/09/19/hack-day/">soutHACKton hack day</a>. By the time I arrived the soldering and drilling had already begun!! Unfortunately I wasn&#8217;t able to stay long so I&#8217;m hoping there&#8217;ll me more of these in the future. I did just about have time to try out an idea I had to hack an old doorbell to sense people using the door knocker. A while ago I had accidentally created a touch sensor with a 555 timer while <a href="https://jtlog.wordpress.com/2009/06/22/my-first-currentcost-development-board-circuit/">attempting to build another circuit</a>. So my cunning plan was to deliberately create a <a href="http://fritzing.org/projects/digital-input-555-touch-switch/">555 touch switch</a> and connect it to the bolt on the inside of the front door. Unfortunately the best I could manage today was a two wire touch sensor, which isn&#8217;t going to work. At least not without leaving a wire hanging out of the letter box with some instructions attached! Unless someone who knows more about electronics can suggest a plan B, I may just resort to a boring doorbell button instead!!</p><br />  <a rel="nofollow" href="http://feeds.wordpress.com/1.0/gocomments/jtlog.wordpress.com/2085/"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/comments/jtlog.wordpress.com/2085/" /></a> <img alt="" border="0" src="https://pixel.wp.com/b.gif?host=jtlog.wordpress.com&#038;blog=1751515&%23038;post=2085&%23038;subd=jtlog&%23038;ref=&%23038;feed=1" width="1" height="1" />]]></content:encoded>
	<enclosure url="https://1.gravatar.com/avatar/74c39fd4d2c3b09efbea8c5db637c57c?s=96&amp;amp;d=identicon" length="" type="" />
<enclosure url="https://jtlog.files.wordpress.com/2012/10/webcams.png?w=300" length="" type="" />
		</item>
		<item>
		<title>Recent hacktivity</title>
		<link>http://eightbar.co.uk/2012/10/14/recent-hacktivity/</link>
		<pubDate>Sun, 14 Oct 2012 22:00:56 +0000</pubDate>
		<dc:creator><![CDATA[James Taylor]]></dc:creator>
				<category><![CDATA[Hursley]]></category>
		<category><![CDATA[Planet]]></category>
		<category><![CDATA[555 timer]]></category>
		<category><![CDATA[eightbar]]></category>
		<category><![CDATA[hackday]]></category>
		<category><![CDATA[hackday-x]]></category>
		<category><![CDATA[hackdayx]]></category>
		<category><![CDATA[hurhackx]]></category>
		<category><![CDATA[IBM]]></category>
		<category><![CDATA[Life, the Universe, and Everything]]></category>
		<category><![CDATA[lotus connections]]></category>
		<category><![CDATA[MQTT]]></category>
		<category><![CDATA[social business]]></category>
		<category><![CDATA[southackton]]></category>
		<category><![CDATA[Southampton]]></category>
		<category><![CDATA[zOS]]></category>

		<guid isPermaLink="false">http://jtlog.wordpress.com/?p=2085</guid>
		<description><![CDATA[This time of year seems to be hacking season and over the last few days I&#8217;ve been along to two hackdays! Friday was IBM&#8217;s internal Social Business Hackday. There was some MQTT hacking, a z/OS hack, hacks with Lotus Connections, &#8230; <a href="http://jtlog.wordpress.com/2012/10/14/recent-hacktivity/">Continue reading <span>&#8594;</span></a><img alt="" border="0" src="http://pixel.wp.com/b.gif?host=jtlog.wordpress.com&#38;blog=1751515&#38;post=2085&#38;subd=jtlog&#38;ref=&#38;feed=1" width="1" height="1"/> <a href="http://eightbar.co.uk/2012/10/14/recent-hacktivity/">Continue reading <span class="meta-nav">&#8594;</span></a>]]></description>
				<content:encoded><![CDATA[<p>This time of year seems to be hacking season and over the last few days I&#8217;ve been along to two <a href="http://subdigit.com/blog/hackday-explained/">hackdays</a>!</p>
<p>Friday was <a href="http://www.brianodonovan.ie/2012/08/hacking-becomes-mainstream-in-ibm.html">IBM&#8217;s internal Social Business Hackday</a>. There was some MQTT hacking, a <a href="https://www.ibm.com/developerworks/mydeveloperworks/blogs/MartinPacker/entry/hackday_x_batch_analytics_baby_steps42">z/OS hack</a>, hacks with Lotus Connections, hacks that could be the future of Lotus Connections, and I was attempting to hack a work around for a <a href="https://jazz.net/jazz/web/projects/Jazz%20Foundation#action=com.ibm.team.workitem.viewWorkItem&amp;id=216492">Jazz work item</a>. And that was just at the Hursley local event! We were able to link up with a few other labs, but over two days there were IBMers hacking around the globe. There are going to be a lot of amazing projects to choose from when it comes to voting.</p>
<p><a href="http://jtlog.files.wordpress.com/2012/10/webcams.png"><img class="alignnone size-medium wp-image-2086" title="webcams" alt="" src="http://jtlog.files.wordpress.com/2012/10/webcams.png?w=300&#038;h=164" height="164" width="300" /></a></p>
<p>(There are a few more photos from HackDay X, and previous hackdays, on the <a href="http://www.flickr.com/groups/hackday_ibm/">IBM hackday group on flickr</a>.)</p>
<p>For round two, today was the <a href="http://southackton.org.uk/2012/09/19/hack-day/">soutHACKton hack day</a>. By the time I arrived the soldering and drilling had already begun!! Unfortunately I wasn&#8217;t able to stay long so I&#8217;m hoping there&#8217;ll me more of these in the future. I did just about have time to try out an idea I had to hack an old doorbell to sense people using the door knocker. A while ago I had accidentally created a touch sensor with a 555 timer while <a href="http://jtlog.wordpress.com/2009/06/22/my-first-currentcost-development-board-circuit/">attempting to build another circuit</a>. So my cunning plan was to deliberately create a <a href="http://fritzing.org/projects/digital-input-555-touch-switch/">555 touch switch</a> and connect it to the bolt on the inside of the front door. Unfortunately the best I could manage today was a two wire touch sensor, which isn&#8217;t going to work. At least not without leaving a wire hanging out of the letter box with some instructions attached! Unless someone who knows more about electronics can suggest a plan B, I may just resort to a boring doorbell button instead!!</p><br />  <a rel="nofollow" href="http://feeds.wordpress.com/1.0/gocomments/jtlog.wordpress.com/2085/"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/comments/jtlog.wordpress.com/2085/" /></a> <img alt="" border="0" src="http://pixel.wp.com/b.gif?host=jtlog.wordpress.com&#038;blog=1751515&%23038;post=2085&%23038;subd=jtlog&%23038;ref=&%23038;feed=1" width="1" height="1" />]]></content:encoded>
	<enclosure url="http://1.gravatar.com/avatar/74c39fd4d2c3b09efbea8c5db637c57c?s=96&amp;amp;d=identicon" length="" type="" />
<enclosure url="http://jtlog.files.wordpress.com/2012/10/webcams.png?w=300" length="" type="" />
		</item>
		<item>
		<title>Even More MQTT enabled TVs</title>
		<link>http://eightbar.co.uk/2012/06/08/even-more-mqtt-enabled-tvs-2/</link>
		<pubDate>Fri, 08 Jun 2012 14:17:57 +0000</pubDate>
		<dc:creator><![CDATA[Ben Hardill]]></dc:creator>
				<category><![CDATA[Planet]]></category>
		<category><![CDATA[8bar]]></category>
		<category><![CDATA[eightbar]]></category>
		<category><![CDATA[MQTT]]></category>
		<category><![CDATA[Projects]]></category>
		<category><![CDATA[redrat]]></category>
		<category><![CDATA[TV]]></category>
		<category><![CDATA[Work]]></category>

		<guid isPermaLink="false">http://www.hardill.me.uk/wordpress/?p=944</guid>
		<description><![CDATA[A project at work recently came up to do with using one of the Emotiv headsets to help out a former Italian IBMer who was suffering from locked in syndrome. The project was being led by Kevin Brown who was looking for ways to use the headset to drive things sending email and browsing the &#8230; <a href="http://www.hardill.me.uk/wordpress/2012/06/08/even-more-mqtt-enabled-tvs/">Continue reading <span>Even More MQTT enabled TVs</span> <span>&#8594;</span></a> <a href="http://eightbar.co.uk/2012/06/08/even-more-mqtt-enabled-tvs-2/">Continue reading <span class="meta-nav">&#8594;</span></a>]]></description>
				<content:encoded><![CDATA[<p><a class="alignright" title="Kevin with the Headset by shawdm, on Flickr" href="http://www.flickr.com/photos/shawdm/4652324438/"><img src="http://farm5.staticflickr.com/4050/4652324438_2e5e0cab06_n.jpg" alt="Kevin Modelling the headset" width="320" height="213" /></a></p>
<p>A project at work recently came up to do with using one of the <a href="http://emotiv.com/">Emotiv</a> headsets to help out a former Italian IBMer who was suffering from <a href="http://en.wikipedia.org/wiki/Locked-in_syndrome">locked in syndrome</a>. The project was being led by <a href="http://kevinxbrown.blogspot.com/">Kevin Brown</a> who was looking for ways to use the headset to drive things sending email and browsing the web but he was also looking for a way to interact with some other tech around the house. The TV was the first on the list.</p>
<p>Continuing on from my previous work with <a href="http://www.hardill.me.uk/wordpress/?p=25">controlling TVs</a> and <a href="http://eightbar.co.uk/2011/09/16/mqtt-powered-video-wall/">video walls</a> with <a href="http://mqtt.org/">MQTT</a> I said I would have a crack at this. My earlier solution was limited to LG TVs with serial ports and this needed to work with any make so a different approach was needed. It also needed to run on Windows so it was also a chance to play with C# and .Net.</p>
<p>To be TV agnostic it was decided to use a USB IR remote from a company called <a href="http://www.redrat.co.uk/index.html">RedRat</a>. They make a number of solutions, but their RedRat III was perfect for what was needed.</p>
<p><a class="alignleft" title="RedRat IR transmitter &amp; receiver by hardillb, on Flickr" href="http://www.flickr.com/photos/hardillb/7136002505/"><img src="http://farm8.staticflickr.com/7066/7136002505_cbfced5a8a_n.jpg" alt="RedRat IR transmitter &amp; receiver" width="240" height="320" /></a></p>
<p>The <a href="http://www.redrat.co.uk/software/SDK/index.html">RedRat API</a> comes with bindings for C++, .Net on Windows (and a <a href="http://www.lirc.org/">LIRC</a> plugin for Linux). The RedRat III is not just a IR transmitter, it is also a receiver which means it can &#8220;learn&#8221; from existing remote controls so it can be used with any TV.</p>
<p>Kevin is using Emotiv headset to drive <a href="http://www.inference.phy.cam.ac.uk/dasher/">Dasher</a> as the input device. Dasher is a sort of keyboard replacement that allows the user to build up words using at a minimum a single input e.g. a single push button. As well as building words other actions can be added to the selector, Kevin added actions for browsing and also to control the TV. These actions publish MQTT messages to a topic with payloads like &#8220;volUp&#8221;, &#8220;chanDown&#8221; or &#8220;power&#8221;.</p>
<p>So now we had the inputs it was time to get round to writing the code to turn those messages into IR signals. There are 2 MQTT .NET libraries listed on the MQTT.org software page. I grabbed the first off the list <a href="http://sourceforge.net/projects/mqttdotnet/">MqttDotNet</a> and got things working pretty quickly.</p>
<p>The following few lines sets up a connection and subscribes to a topic.</p>
<pre class="brush: csharp; gutter: true">String connectionString = &quot;tcp://&quot; + 
  Properties.Settings.Default.host.Trim() + &quot;:&quot; +
  Properties.Settings.Default.port;
IMqtt client = MqttClientFactory.CreateClient(connectionString, &quot;mqtt2ir&quot;);
try
{
	client.Connect(true);
	client.PublishArrived += new PublishArrivedDelegate(onMessage);
	client.ConnectionLost += new ConnectionDelegate(connectionLost);
	client.Subscribe(Properties.Settings.Default.topic.Trim(), 
	  QoS.BestEfforts);
}</pre>
<p>Where the onMessage callback looks like this:</p>
<pre class="brush: csharp; gutter: true">bool onMessage(object sender, PublishArrivedArgs msg)
{
	String command = msg.Payload.ToString().Trim();
	IRPacket packet = loadSignal(command);
	if (packet != null) 
	{
		redrat.OutputModulatedSignal(packet);
	}
	return true;
}</pre>
<p><a href="http://www.hardill.me.uk/wordpress/wp-content/uploads/2012/06/MQTT2IR.png"><img class="alignright size-medium wp-image-986" title="MQTT2IR Settings Window" src="http://www.hardill.me.uk/wordpress/wp-content/uploads/2012/06/MQTT2IR.png" alt="MQTT2IR Settings Window" width="300" height="249" /></a></p>
<p>And that is pretty much the meat of the whole application, the rest was just some code to initialise the RedRat and to turn it into a System Tray application with a window for entering the broker details and training the commands.</p>
<p>Unfortunately just a few days before we were due to have delivered this project we learned that the intended recipient had picked up a respiratory infection and had passed away. I would like to extend my thoughts to their family and I hope we can find somebody who may find this work useful in the future.</p>
]]></content:encoded>
	<enclosure url="" length="" type="" />
		</item>
		<item>
		<title>Even More MQTT enabled TVs</title>
		<link>http://eightbar.co.uk/2012/06/08/even-more-mqtt-enabled-tvs/</link>
		<pubDate>Fri, 08 Jun 2012 14:17:57 +0000</pubDate>
		<dc:creator><![CDATA[Ben Hardill]]></dc:creator>
				<category><![CDATA[Planet]]></category>
		<category><![CDATA[8bar]]></category>
		<category><![CDATA[eightbar]]></category>
		<category><![CDATA[MQTT]]></category>
		<category><![CDATA[Projects]]></category>
		<category><![CDATA[redrat]]></category>
		<category><![CDATA[TV]]></category>
		<category><![CDATA[Work]]></category>

		<guid isPermaLink="false">http://www.hardill.me.uk/wordpress/?p=944</guid>
		<description><![CDATA[A project at work recently came up to do with using one of the Emotiv headsets to help out a former Italian IBMer who was suffering from locked in syndrome. The project was being led by Kevin Brown who was looking for ways to use the headset to drive things sending email and browsing the [&#8230;] <a href="http://eightbar.co.uk/2012/06/08/even-more-mqtt-enabled-tvs/">Continue reading <span class="meta-nav">&#8594;</span></a>]]></description>
				<content:encoded><![CDATA[<p><a class="alignright" title="Kevin with the Headset by shawdm, on Flickr" href="http://www.flickr.com/photos/shawdm/4652324438/"><img src="http://farm5.staticflickr.com/4050/4652324438_2e5e0cab06_n.jpg" alt="Kevin Modelling the headset" width="320" height="213" /></a></p>
<p>A project at work recently came up to do with using one of the <a href="http://emotiv.com/">Emotiv</a> headsets to help out a former Italian IBMer who was suffering from <a href="http://en.wikipedia.org/wiki/Locked-in_syndrome">locked in syndrome</a>. The project was being led by <a href="http://kevinxbrown.blogspot.com/">Kevin Brown</a> who was looking for ways to use the headset to drive things sending email and browsing the web but he was also looking for a way to interact with some other tech around the house. The TV was the first on the list.</p>
<p>Continuing on from my previous work with <a href="http://www.hardill.me.uk/wordpress/?p=25">controlling TVs</a> and <a href="http://eightbar.co.uk/2011/09/16/mqtt-powered-video-wall/">video walls</a> with <a href="http://mqtt.org/">MQTT</a> I said I would have a crack at this. My earlier solution was limited to LG TVs with serial ports and this needed to work with any make so a different approach was needed. It also needed to run on Windows so it was also a chance to play with C# and .Net.</p>
<p>To be TV agnostic it was decided to use a USB IR remote from a company called <a href="http://www.redrat.co.uk/index.html">RedRat</a>. They make a number of solutions, but their RedRat III was perfect for what was needed.</p>
<p><a class="alignleft" title="RedRat IR transmitter &amp; receiver by hardillb, on Flickr" href="http://www.flickr.com/photos/hardillb/7136002505/"><img src="http://farm8.staticflickr.com/7066/7136002505_cbfced5a8a_n.jpg" alt="RedRat IR transmitter &amp; receiver" width="240" height="320" /></a></p>
<p>The <a href="http://www.redrat.co.uk/software/SDK/index.html">RedRat API</a> comes with bindings for C++, .Net on Windows (and a <a href="http://www.lirc.org/">LIRC</a> plugin for Linux). The RedRat III is not just a IR transmitter, it is also a receiver which means it can &#8220;learn&#8221; from existing remote controls so it can be used with any TV.</p>
<p>Kevin is using Emotiv headset to drive <a href="http://www.inference.phy.cam.ac.uk/dasher/">Dasher</a> as the input device. Dasher is a sort of keyboard replacement that allows the user to build up words using at a minimum a single input e.g. a single push button. As well as building words other actions can be added to the selector, Kevin added actions for browsing and also to control the TV. These actions publish MQTT messages to a topic with payloads like &#8220;volUp&#8221;, &#8220;chanDown&#8221; or &#8220;power&#8221;.</p>
<p>So now we had the inputs it was time to get round to writing the code to turn those messages into IR signals. There are 2 MQTT .NET libraries listed on the MQTT.org software page. I grabbed the first off the list <a href="http://sourceforge.net/projects/mqttdotnet/">MqttDotNet</a> and got things working pretty quickly.</p>
<p>The following few lines sets up a connection and subscribes to a topic.</p>
<pre class="brush: csharp; gutter: true">String connectionString = &quot;tcp://&quot; + 
  Properties.Settings.Default.host.Trim() + &quot;:&quot; +
  Properties.Settings.Default.port;
IMqtt client = MqttClientFactory.CreateClient(connectionString, &quot;mqtt2ir&quot;);
try
{
	client.Connect(true);
	client.PublishArrived += new PublishArrivedDelegate(onMessage);
	client.ConnectionLost += new ConnectionDelegate(connectionLost);
	client.Subscribe(Properties.Settings.Default.topic.Trim(), 
	  QoS.BestEfforts);
}</pre>
<p>Where the onMessage callback looks like this:</p>
<pre class="brush: csharp; gutter: true">bool onMessage(object sender, PublishArrivedArgs msg)
{
	String command = msg.Payload.ToString().Trim();
	IRPacket packet = loadSignal(command);
	if (packet != null) 
	{
		redrat.OutputModulatedSignal(packet);
	}
	return true;
}</pre>
<p><a href="http://www.hardill.me.uk/wordpress/wp-content/uploads/2012/06/MQTT2IR.png"><img class="alignright size-medium wp-image-986" title="MQTT2IR Settings Window" src="http://www.hardill.me.uk/wordpress/wp-content/uploads/2012/06/MQTT2IR.png" alt="MQTT2IR Settings Window" width="300" height="249" /></a></p>
<p>And that is pretty much the meat of the whole application, the rest was just some code to initialise the RedRat and to turn it into a System Tray application with a window for entering the broker details and training the commands.</p>
<p>Unfortunately just a few days before we were due to have delivered this project we learned that the intended recipient had picked up a respiratory infection and had passed away. I would like to extend my thoughts to their family and I hope we can find somebody who may find this work useful in the future.</p>
]]></content:encoded>
	<enclosure url="" length="" type="" />
		</item>
		<item>
		<title>MQTT powered video wall</title>
		<link>http://eightbar.co.uk/2011/09/16/mqtt-powered-video-wall/</link>
		<pubDate>Fri, 16 Sep 2011 10:20:22 +0000</pubDate>
		<dc:creator><![CDATA[Ben Hardill]]></dc:creator>
				<category><![CDATA[IBM Projects]]></category>
		<category><![CDATA[messaging]]></category>
		<category><![CDATA[Technology]]></category>
		<category><![CDATA[arduino]]></category>
		<category><![CDATA[ETS]]></category>
		<category><![CDATA[IBM Forum]]></category>
		<category><![CDATA[MQTT]]></category>
		<category><![CDATA[South Bank]]></category>
		<category><![CDATA[video]]></category>

		<guid isPermaLink="false">http://eightbar.co.uk/?p=1065</guid>
		<description><![CDATA[Scaling things up a little from my first eightbar post. This was one of those projects that just sort of &#8220;turned up&#8221;. About 3 weeks ago one of the managers for the ETS department in Hursley got a call from &#8230; <a href="http://eightbar.co.uk/2011/09/16/mqtt-powered-video-wall/">Continue reading <span class="meta-nav">&#8594;</span></a>]]></description>
				<content:encoded><![CDATA[<p>Scaling things up a little from <a href="http://eightbar.co.uk/2009/06/22/a-different-kind-of-tv-remote-control/">my first eightbar post</a>.</p>
<p>This was one of those projects that just sort of &#8220;turned up&#8221;. About 3 weeks ago one of the managers for the ETS department in Hursley got a call from the team building the new IBM Forum in <a href="http://www-05.ibm.com/uk/locations/sbnk.html">IBM South Bank</a>. IBM Forums are locations where IBM can showcase technologies and solutions for customers. The team were looking for a way to control a video wall and a projector to make them show specific videos on request. The requests will come from pedestals known as &#8220;provokers&#8221;, each having a perspex dome holding a thought-provoking item. The initial suggestions had been incredibility expensive and we were asked if we could come up with a solution.</p>
<p><a title="Provoker by hardillb, on Flickr" href="http://www.flickr.com/photos/hardillb/6150090094/"><img src="http://farm7.static.flickr.com/6080/6150090094_170bde8686.jpg" alt="Provoker" width="299" height="500" /></a></p>
<p>The provokers have access to power and an Ethernet connection. Taking all that into account a few ideas came to mind but the best seamed to be an Arduino board with Ethernet support and a button/sensor to trigger the video. There is a relatively new arduino board available that has a <a href="http://arduino.cc/en/Main/ArduinoBoardEthernet">built in Ethernet</a> shield which seemed perfect for this project. Also, since a number of the items in the provokers would be related to IBM&#8217;s Smarter Planet initiative, it made sense to use <a href="http://mqtt.org">MQTT</a> as a messaging layer as this has been used to implement a number of solutions in this space.</p>
<p><a href="http://knolleary.net/">Nick O&#8217;Leary</a> was enlisted to put together the hardware and also the sketch for the Arduino as he had already written a <a href="http://knolleary.net/arduino-client-for-mqtt/">MQTT client for Arduino</a> in the past.</p>
<p>Each provoker will publish a message containing a playload of &#8220;play&#8221; to a topic like</p>
<p><em>provoker/{n}/action</em></p>
<p>Where &#8216;{n}&#8217; is the unique number identifying which of the 6 provokers sent the message.</p>
<p>To provide some feedback to the guest that pressed the button, the LED has been made to pulse while one of the provoker-specific videos is playing. This is controlled by each provoker subscribing to the following topic</p>
<p><em>provoker/{n}/ack</em></p>
<p>Sending &#8220;play&#8221; to this topic causes the LED pluse, sending &#8220;stop&#8221; turns the LED solid again.</p>
<p>The video wall will be driven by software called Scala InfoChannel which has a scripting interface supporting (among other things) Python. So a short script to subscribe to the &#8216;action&#8217; topics and to publish on on the &#8216;ack&#8217; got the videos changing on demand.</p>
<p>And sat in the middle is an instance of the <a href="https://www.ibm.com/developerworks/community/groups/service/html/communityview?communityUuid=d5bedadd-e46f-4c97-af89-22d65ffee070">Really Small Message Broker</a> to tie everything together.</p>
<p><a title="Arduino in a box by knolleary, on Flickr" href="http://www.flickr.com/photos/knolleary/6123416370/"><img src="http://farm7.static.flickr.com/6185/6123416370_ba88cde8ee.jpg" alt="Arduino in a box" width="500" height="299" /></a></p>
<p>This was also the perfect place to use some of <a href="http://www.flickr.com/photos/hardillb/6127193305/in/photostream">my new &#8220;MQTT Inside&#8221; stickers</a>.</p>
<p><a title="First sticker deployed by hardillb, on Flickr" href="http://www.flickr.com/photos/hardillb/6143434166/"><img src="http://farm7.static.flickr.com/6189/6143434166_4cf426ac18.jpg" alt="First sticker deployed" width="299" height="500" /></a></p>
<p>This project only used one of the digital channels (for the button) and one of the analogue channels (for the LED) available on the Arduino &#8211; which leaves a lot of room for expansion for these type of devices. I can see them being used for future projects.</p>
<p><strong>Parts list</strong></p>
<ol>
<li>Arduino Ethernet</li>
<li>Blue LED Illuminated Button</li>
<li>A single resistor to protect the LED</li>
<li>9v power supply</li>
<li>Sparkfun Case</li>
</ol>
]]></content:encoded>
			</item>
	</channel>
</rss>
